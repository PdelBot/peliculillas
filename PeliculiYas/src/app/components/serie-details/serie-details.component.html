<app-menu></app-menu>
<div class="container">
  <div class="header">
    <div class="image">
      <img [src]="getImgUrl(seriesDetails?.poster_path || '')" alt="">
    </div>
    <div class="description">
      <div class="title1">
        <h2> {{ seriesDetails?.name }} </h2>
      </div>
      <div>
        <p class="title1" *ngIf="seriesDetails?.tagline">{{ seriesDetails?.tagline }}</p>
        <div>
          <p>{{seriesDetails?.overview}}</p>
        </div>
        <div>
          <p><strong> Lanzamiento: {{seriesDetails?.first_air_date}} </strong></p>
        </div>
        <div>
          <p><strong> Calificación: ({{ seriesDetails?.vote_average }} / 10) </strong> <ngb-rating class="amarillo"
              [(rate)]="rating" [max]="5" [readonly]="true"></ngb-rating> </p>
        </div>
        <div>
          @for (item of seriesDetails?.genres; track $index) {
          <div class="badge">
            {{item.name}}
            <span></span>
          </div>
          }
        </div>  
      </div>
    </div>
  </div>
  <hr class="guion">
  <div>
    <ul class="nav justify-content-center">
      <li class="nav-item" *ngFor="let season of seasons">
        <a class="nav-link" href="#" (click)="selectSeason($event, season)">
          Season {{ season.season_number }}
        </a>
      </li>
    </ul>
    <div *ngIf="selectedSeason">
      <div class="episodes">
       <!-- @for (episode of selectedSeason.episodes; track selectedSeason.episodes.indexOf(episode)) {-->
        <div *ngFor="let episode of selectedSeason.episodes | slice:0:episodesToShow; let i = index" class="episode-card d-flex gap-3 my-4">
          <div class="episode-thumbnail">
            <img *ngIf="episode.still_path" [src]="getImgUrl(episode.still_path)" alt="{{ episode.name }}" class="card-img">
            <img *ngIf="!episode.still_path" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQumqw6UawRn7rOgAvevIfEnX55015CA-oTeA&s" alt="img no encontrada" class="card-img">
          </div>
          <div class="episode-info">
            <h4>{{ episode.episode_number }}. {{ episode.name }}</h4>
            <span>{{ episode.air_date }} | {{ episode.runtime }} minutos</span>
            <p class="text w-75 mt-2">{{ episode.overview }}</p>
          </div>
        </div>
      <!-- }-->
        <div *ngIf="episodesToShow < selectedSeason.episodes.length" class="text-center my-4">
          <button class="btn btn-primary" (click)="loadMoreEpisodes()">Ver más</button>
        </div>
      </div>
    </div>
  </div>