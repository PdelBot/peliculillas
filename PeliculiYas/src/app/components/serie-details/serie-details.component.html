<app-menu></app-menu>
<div class="container">
  <div class="header">
    <div class="image">
      <img [src]="getImgUrl(seriesDetails?.poster_path || '')" alt="">
    </div>
    <div class="description">
      <div class="title1">
        <h2> {{ seriesDetails?.original_name }} </h2>
      </div>
      <div>
        <p class="title1" *ngIf="seriesDetails?.tagline">{{ seriesDetails?.tagline }}</p>
        <div>
          <p>{{seriesDetails?.overview}}</p>
        </div>
        <div>
          <p><strong> Lanzamiento: {{seriesDetails?.first_air_date}} </strong></p>
        </div>
        <div>
          <p><strong> Calificaci√≥n: ({{ seriesDetails?.vote_average }} / 10) </strong> <ngb-rating class="amarillo"
              [(rate)]="rating" [max]="5" [readonly]="true"></ngb-rating> </p>
        </div>
        <div>

          @if (serieFavorite) {
          <button class="favorite-button" (click)="isAdded() ? removeFromFavourites() : addToFavourites()">
            <label class="container-button">
              <input type="checkbox" [checked]="isAdded()">
              <div class="checkmark">
                <svg viewBox="0 0 256 256">
                  <rect fill="none" height="256" width="256"></rect>
                  <path [attr.fill]="isAdded() ? 'red' : 'none'" [attr.stroke]="isAdded() ? 'none' : 'black'"
                    d="M224.6,51.9a59.5,59.5,0,0,0-43-19.9,60.5,60.5,0,0,0-44,17.6L128,59.1l-7.5-7.4C97.2,28.3,59.2,26.3,35.9,47.4a59.9,59.9,0,0,0-2.3,87l83.1,83.1a15.9,15.9,0,0,0,22.6,0l81-81C243.7,113.2,245.6,75.2,224.6,51.9Z"
                    stroke-width="20px"></path>
                </svg>
              </div>
            </label>
          </button>
          }

          @if (serieWatchList) {
          <button class="favorite-button" (click)="isAddedWatchList() ? removeFromWatchList() : addToWatchlist()">
            <label class="ui-bookmark">
              <input type="checkbox">
              <div class="bookmark">
                <svg viewBox="0 0 32 32">
                  <g>
                    <path [attr.fill]="isAddedWatchList() ? 'gold' : 'grey'"
                      [attr.stroke]="isAddedWatchList() ? 'none' : 'black'"
                      d="M27 4v27a1 1 0 0 1-1.625.781L16 24.281l-9.375 7.5A1 1 0 0 1 5 31V4a4 4 0 0 1 4-4h14a4 4 0 0 1 4 4z">
                    </path>
                  </g>
                </svg>
              </div>
            </label>
          </button>
          }
        </div>

        @for (item of seriesDetails?.genres; track $index) {
        <div class="badge">
          {{item.name}}
          <span></span>
        </div>
        }
      </div>
    </div>
  </div>
</div>
<hr class="guion">
<div>
  <ul class="nav justify-content-center">
    <li class="nav-item" *ngFor="let season of seasons">
      <a class="nav-link" href="#" (click)="selectSeason($event, season)">
        Season {{ season.season_number }}
      </a>
    </li>
  </ul>
  <div *ngIf="selectedSeason">
    <div>
      @for (episode of selectedSeason.episodes; track selectedSeason.episodes.indexOf(episode)) {
      <div class="episode-card">
        <div class="episode-thumbnail">
          <img *ngIf="episode.still_path" [src]="getImgUrl(episode.still_path)" alt="{{ episode.name }}">
        </div>
        <div class="episode-info">
          <h6>{{ episode.episode_number }}. {{ episode.name }}</h6>
          <span>{{ episode.air_date }} | {{ episode.runtime }} minutos</span>
          <p>{{ episode.overview }}</p>
        </div>
      </div>
      }
    </div>
  </div>
</div>